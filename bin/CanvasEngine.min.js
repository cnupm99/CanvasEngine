// version 1.11, build 2, Sun Feb 04 2018
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(g){var f=function(){};f.prototype=g;return new f};$jscomp.underscoreProtoCanBeSet=function(){var g={a:!0},f={};try{return f.__proto__=g,f.a}catch(d){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(g,f){g.__proto__=f;if(g.__proto__!==f)throw new TypeError(g+" is not extensible");return g}:null;
$jscomp.inherits=function(g,f){g.prototype=$jscomp.objectCreate(f.prototype);g.prototype.constructor=g;if($jscomp.setPrototypeOf){var d=$jscomp.setPrototypeOf;d(g,f)}else for(d in f)if("prototype"!=d)if(Object.defineProperties){var h=Object.getOwnPropertyDescriptor(f,d);h&&Object.defineProperty(g,d,h)}else g[d]=f[d];g.superClass_=f.prototype};
(function(){var g=function(f,d){if(!(f instanceof d))throw Error("Bound instance method accessed before binding");};define(function(){var f=function(){var a=function(a){};a.prototype.point=function(a,c){return null==a?[0,0]:null!=c?[this.number(a),this.number(c)]:Array.isArray(a)?[this.number(a[0]),this.number(a[1])]:null!=a.x&&null!=a.y?[this.number(a.x),this.number(a.y)]:null!=a.width&&null!=a.height?[this.number(a.width),this.number(a.height)]:[0,0]};a.prototype.pixel=function(a,c){var b=this.point(a,
c);return[b[0]>>0,b[1]>>0]};a.prototype["int"]=function(a){return this.number(a)>>0};a.prototype.number=function(a){return null!=a?+a:0};a.prototype.deg2rad=function(a){return this.number(a)*this._PIDIV180};a.prototype._PIDIV180=Math.PI/180;return a}();var d=function(a){var b=f.call(this,a)||this;b.name=a.name||"";b.type="DisplayObject";if(null!=a.canvas)b.canvas=a.canvas;else{var c=a.parent||document.body;b.canvas=document.createElement("canvas");b.canvas.style.position="absolute";c.appendChild(b.canvas)}b.context=
a.context||b.canvas.getContext("2d");b._setProperties(a);return b};$jscomp.inherits(d,f);d.prototype.set=function(a){if(null!=a)return null!=a.visible&&(this.visible=a.visible),this.visible?this.show():this.hide(),null!=a.position&&this.move(a.position),null!=a.size&&this.resize(a.size),null!=a.realSize&&this.upsize(a.realSize),null!=a.center&&this.setCenter(a.center),null!=a.anchor&&this.setAnchor(a.anchor),null!=a.scale&&this.zoom(a.scale),null!=a.rotation&&this.rotate(a.rotation),null!=a.alpha&&
this.setAlpha(a.alpha),null!=a.shadow&&this.setShadow(a.shadow),this.needAnimation=!0};d.prototype.show=function(){return this.needAnimation=this.visible=!0};d.prototype.hide=function(){this.visible=!1;this.needAnimation=!0;return!1};d.prototype.move=function(a,b){this.position=this.pixel(a,b);this.needAnimation=!0;return this.position};d.prototype.shift=function(a,b){return this.move([a+this.position[0],(void 0===b?0:b)+this.position[1]])};d.prototype.resize=function(a,b){this.size=this.pixel(a,
b);this.setAnchor(this.anchor);this.needAnimation=!0;return this.size};d.prototype.upsize=function(a,b){this.realSize=this.pixel(a,b);this.setAnchor(this.anchor);return this.realSize};d.prototype.setCenter=function(a,b){this.center=this.pixel(a,b);var c=0===this.size[0]&&0===this.size[1]?this.realSize:this.size;this.anchor=[0===c[0]?0:this.center[0]/c[0],0===c[1]?0:this.center[1]/c[1]];this.needAnimation=!0;return this.center};d.prototype.setAnchor=function(a,b){this.anchor=this.point(a,b);var c=
0===this.size[0]&&0===this.size[1]?this.realSize:this.size;this.center=[this["int"](c[0]*this.anchor[0]),this["int"](c[1]*this.anchor[1])];this.needAnimation=!0;return this.anchor};d.prototype.zoom=function(a,b){this.scale=null!=a?this.point(a,b):[1,1];this.needAnimation=!0;return this.scale};d.prototype.rotate=function(a){this.rotation=this["int"](a);0>this.rotation&&(this.rotation=360+this.rotation);360<=this.rotation&&(this.rotation%=360);this._rotation=this.rotation*this._PIDIV180;this.needAnimation=
!0;return this.rotation};d.prototype.rotateOn=function(a){return this.rotate(this.rotation+this["int"](a))};d.prototype.setAlpha=function(a){this.alpha=a?this.number(a):1;0>this.alpha&&(this.alpha=0);1<this.alpha&&(this.alpha=1);this.needAnimation=!0;return this.alpha};d.prototype.setShadow=function(a){this.shadow=null!=a&&a?{color:a.color||"#000",blur:a.blur||3,offsetX:this["int"](a.offsetX),offsetY:this["int"](a.offsetY),offset:this["int"](a.offset)}:!1;this.needAnimation=!0;return this.shadow};
d.prototype.testPoint=function(a,b){var c=this.canvas.getBoundingClientRect();c=this.context.getImageData(a-c.left,b-c.top,1,1).data;null==c.every&&(c.every=Array.prototype.every);return!c.every(function(a){return 0===a})};d.prototype.testRect=function(a,b){var c=this.canvas.getBoundingClientRect();"scene"!==this.type&&(c={left:c.left+this.position[0],top:c.top+this.position[1],right:c.left+this.position[0]+this.size[0],bottom:c.top+this.position[1]+this.size[1]});return a>=c.left&&a<=c.right&&b>=
c.top&&b<=c.bottom};d.prototype.animate=function(){this._deltaX=this.position[0];this._deltaY=this.position[1];this.shadow&&(this.context.shadowColor=this.shadow.color,this.context.shadowBlur=this.shadow.blur,this.context.shadowOffsetX=Math.max(this.shadow.offsetX,this.shadow.offset),this.context.shadowOffsetY=Math.max(this.shadow.offsetY,this.shadow.offset));1===this.scale[0]&&1===this.scale[1]||this.context.scale(this.scale[0],this.scale[1]);1!==this.alpha&&(this.context.globalAlpha=this.alpha);
0!==this.rotation&&(this.context.translate(this.center[0]+this.position[0],this.center[1]+this.position[1]),this.context.rotate(this._rotation),this._deltaX=-this.center[0],this._deltaY=-this.center[1]);return this.needAnimation=!1};d.prototype._setProperties=function(a){(this.visible=null!=a.visible?a.visible:!0)?this.show():this.hide();this.move(a.position);this.realSize=[0,0];this.resize(a.size);null==a.center&&null!=a.anchor||this.setCenter(a.center);null!=a.anchor&&null==a.center&&this.setAnchor(a.anchor);
this.zoom(a.scale);this.rotate(a.rotation);this.setAlpha(a.alpha);this.setShadow(a.shadow);return this.needAnimation=!0};d.prototype.getOptions=function(){return{name:this.name,type:this.type,visible:this.visible,position:[this.position[0],this.position[1]],size:[this.size[0],this.size[1]],realSize:[this.realSize[0],this.realSize[1]],center:[this.center[0],this.center[1]],anchor:[this.anchor[0],this.anchor[1]],scale:[this.scale[0],this.scale[1]],rotation:this.rotation,alpha:this.alpha,shadow:this.shadow?
{blur:this.shadow.blur,color:this.shadow.color,offset:this.shadow.offset,offsetX:this.shadow.offsetX,offsetY:this.shadow.offsetY}:!1}};var h=function(a){a=d.call(this,a)||this;a.childrens=[];return a};$jscomp.inherits(h,d);h.prototype.get=function(a){a=this.index(a);return-1===a?!1:this.childrens[a]};h.prototype.remove=function(a){a=this.index(a);if(-1===a)return!1;this.childrens.splice(a,1);return this.needAnimation=!0};h.prototype.rename=function(a,b){var c=this.index(a);if(-1===c)return!1;this.childrens[c].name=
b;return!0};h.prototype.index=function(a){var b=-1;this.childrens.some(function(c,d){var n;(n=c.name===a)&&(b=d);return n});return b};var e=function(a){var b=d.call(this,a)||this;b.type="graph";b._commands=a.commands||[];return b};$jscomp.inherits(e,d);e.prototype.clear=function(){this._commands=[];return this.needAnimation=!0};e.prototype.beginPath=function(){return this._commands.push({command:"beginPath"})};e.prototype.lineCap=function(a){return this._commands.push({command:"lineCap",lineCap:a})};
e.prototype.strokeStyle=function(a){return this._commands.push({command:"strokeStyle",style:a})};e.prototype.fillStyle=function(a){return this._commands.push({command:"fillStyle",style:a})};e.prototype.linearGradient=function(a,b,c,d,m){return this._commands.push({command:"gradient",point1:this.pixel(a,b),point2:this.pixel(c,d),colors:m})};e.prototype.lineWidth=function(a){return this._commands.push({command:"lineWidth",width:this["int"](a)})};e.prototype.setLineDash=function(a){return this._commands.push({command:"setDash",
dash:a})};e.prototype.lineDashOffset=function(a){return this._commands.push({command:"dashOffset",offset:this["int"](a)})};e.prototype.moveTo=function(a,b){return this._commands.push({command:"moveTo",point:this.pixel(a,b)})};e.prototype.lineTo=function(a,b){this._commands.push({command:"lineTo",point:this.pixel(a,b)});return this.needAnimation=!0};e.prototype.line=function(a,b,c,d){this._commands.push({command:"line",from:this.pixel(a,b),to:this.pixel(c,d)});return this.needAnimation=!0};e.prototype.rect=
function(a,b,c,d,m){m=void 0===m?0:m;this._commands.push({command:"rect",point:this.pixel(a,b),size:this.pixel(c,d),radius:this["int"](m)});return this.needAnimation=!0};e.prototype.circle=function(a,b,c){this._commands.push({command:"circle",center:this.pixel(a,b),radius:this["int"](c)});return this.needAnimation=!0};e.prototype.arc=function(a,b,c,d,m,e){this._commands.push({command:"arc",center:this.pixel(a,b),radius:this["int"](c),beginAngle:this.deg2rad(d),endAngle:this.deg2rad(m),antiClockWise:e||
!1});return this.needAnimation=!0};e.prototype.polyline=function(a,b){var c=this;b=void 0===b?!0:b;this._commands.push({command:"beginPath"});this.moveTo(a[0][0],a[0][1]);a.forEach(function(a){return c.lineTo(a[0],a[1])});b&&this.stroke();return this.needAnimation=!0};e.prototype.polygon=function(a){this.polyline(a,!1);this.lineTo(a[0][0],a[0][1]);this.stroke();return this.fill()};e.prototype.fill=function(){this._commands.push({command:"fill"});return this.needAnimation=!0};e.prototype.stroke=function(){this._commands.push({command:"stroke"});
return this.needAnimation=!0};e.prototype.animate=function(){var a=this;if(this.visible)return d.prototype.animate.call(this),this.context.lineCap="round",this._commands.forEach(function(b){switch(b.command){case "beginPath":return a.context.beginPath();case "lineCap":return a.context.lineCap=b.lineCap;case "stroke":return a.context.stroke();case "fill":return a.context.fill();case "setDash":return a.context.setLineDash(b.dash);case "dashOffset":return a.context.lineDashOffset=b.offset;case "moveTo":return a.context.moveTo(b.point[0]+
a._deltaX,b.point[1]+a._deltaY);case "lineTo":return a.context.lineTo(b.point[0]+a._deltaX,b.point[1]+a._deltaY);case "line":return a.context.beginPath(),a.context.moveTo(b.from[0]+a._deltaX,b.from[1]+a._deltaY),a.context.lineTo(b.to[0]+a._deltaX,b.to[1]+a._deltaY),a.context.stroke();case "strokeStyle":return a.context.strokeStyle=b.style;case "fillStyle":return a.context.fillStyle=b.style;case "lineWidth":return a.context.lineWidth=b.width;case "rect":return a.context.beginPath(),0===b.radius?a.context.rect(b.point[0]+
a._deltaX,b.point[1]+a._deltaY,b.size[0],b.size[1]):a._drawRoundedRect(a.context,b.point[0]+a._deltaX,b.point[1]+a._deltaY,b.size[0],b.size[1],b.radius);case "circle":return a.context.beginPath(),a.context.arc(b.center[0]+a._deltaX,b.center[1]+a._deltaY,b.radius,0,2*Math.PI,!1);case "arc":return a.context.beginPath(),a.context.arc(b.center[0]+a._deltaX,b.center[1]+a._deltaY,b.radius,b.beginAngle,b.endAngle,b.antiClockWise);case "gradient":var c=a.context.createLinearGradient(b.point1[0]+a._deltaX,
b.point1[1]+a._deltaY,b.point2[0]+a._deltaX,b.point2[1]+a._deltaY);b.colors.forEach(function(a){return c.addColorStop(a[0],a[1])});return a.context.fillStyle=c}});this.needAnimation=!1};e.prototype.log=function(){return console.log(this._commands)};e.prototype.getOptions=function(){var a=d.prototype.getOptions.call(this);a.commands=JSON.parse(JSON.stringify(this._commands));return a};e.prototype._drawRoundedRect=function(a,b,c,d,m,e){var n=Math.PI;var f=n/2;var g=b+e;var h=b+d-e;var k=c+e;var l=c+
m-e;a.moveTo(g,c);a.lineTo(h,c);a.arc(h,k,e,-f,0);a.lineTo(b+d,l);a.arc(h,l,e,0,f);a.lineTo(g,c+m);a.arc(g,l,e,f,n);a.lineTo(b,k);return a.arc(g,k,e,n,3*f)};var q=function(a){var b=d.call(this,a)||this;b._imageOnLoad=b._imageOnLoad.bind(b);b.type="image";b.onload=a.onload;b.loaded=!1;b.image=document.createElement("img");b.image.onload=b._imageOnLoad;b.loadedFrom="";b.setRect(a.rect);null!=a.src?b.src(a.src):b.from(a.from);return b};$jscomp.inherits(q,d);q.prototype.setRect=function(a){this.rect=
a||!1;this.needAnimation=!0;return this.rect};q.prototype.src=function(a){this.loaded=!1;this.loadedFrom=a;return this.image.src=a};q.prototype.from=function(a,b){if(null!=a)return this.image=a,this.loadedFrom=b||"",this.upsize([this.image.width,this.image.height]),(0>=this.size[0]||0>=this.size[1])&&this.resize(this.realSize),this.needAnimation=this.loaded=!0};q.prototype.animate=function(){if(this.loaded){if(this.visible)return d.prototype.animate.call(this),this.rect?this.context.drawImage(this.image,
this.rect[0],this.rect[1],this.rect[2],this.rect[3],this._deltaX,this._deltaY,this.size[0],this.size[1]):this.size[0]===this.realSize[0]&&this.size[1]===this.realSize[1]?this.context.drawImage(this.image,this._deltaX,this._deltaY):this.context.drawImage(this.image,this._deltaX,this._deltaY,this.size[0],this.size[1]);this.needAnimation=!1}};q.prototype._imageOnLoad=function(a){g(this,q);this.upsize([this.image.width,this.image.height]);(0>=this.size[0]||0>=this.size[1])&&this.resize(this.realSize);
this.needAnimation=this.loaded=!0;if(null!=this.onload)return this.onload(this.realSize)};q.prototype.getOptions=function(){var a=d.prototype.getOptions.call(this);a.rect=this.rect?[this.rect[0],this.rect[1],this.rect[2],this.rect[3]]:!1;this.loaded?(a.from=this.image,a.loadedFrom=this.loadedFrom):0<this.loadedFrom.length&&(a.src=this.loadedFrom);a.loaded=this.loaded;return a};var p=function(a){var b=d.call(this,a)||this;b.type="text";b.fontHeight=0;b.textWidth=0;b.setFillStyle(a.fillStyle);b.setStrokeStyle(a.strokeStyle);
b.setFont(a.font);b.setBaseline(a.baseline);b.setStrokeWidth(a.strokeWidth);b.setUnderline(a.underline,a.underlineOffset);b.write(a.text);return b};$jscomp.inherits(p,d);p.prototype.setFont=function(a){this.font=a||"12px Arial";this.fontHeight=this._getFontHeight(this.font);this.needAnimation=!0;return this.font};p.prototype.setBaseline=function(a){"top"!==a&&"middle"!==a&&"bottom"!==a&&(a="top");this.baseline=a;this.needAnimation=!0;return this.baseline};p.prototype.setFillStyle=function(a){this.fillStyle=
a||!1;this.needAnimation=!0;return this.fillStyle};p.prototype.setStrokeStyle=function(a){this.strokeStyle=a||!1;this.needAnimation=!0;return this.strokeStyle};p.prototype.setStrokeWidth=function(a){this.strokeWidth=null!=a?this["int"](a):1;this.needAnimation=!0;return this.strokeWidth};p.prototype.setUnderline=function(a,b){this.underline=a||!1;this.underlineOffset=b||this._rect0.bottom;this.needAnimation=!0;return this.underline};p.prototype.write=function(a){this.text=a||"";this.upsize(this._getRealSizes(this.text));
this.textWidth=this.realSize[0];this.textHeight=this.realSize[1];this.needAnimation=!0;return this.text};p.prototype.animate=function(){var a=this,b;if(this.visible){d.prototype.animate.call(this);this.context.font=this.font;this.context.textBaseline="top";var c=Array.isArray(this.fillStyle);this.fillStyle&&!c&&(this.context.fillStyle=this.fillStyle);this.strokeStyle&&(this.context.strokeStyle=this.strokeStyle,this.context.lineWidth=this.strokeWidth);var e=this.text.split("\n");var m=this._deltaY;
this.underline&&(b=this.strokeStyle||this.fillStyle);return e.forEach(function(d){if(c){var e=a.context.createLinearGradient(a._deltaX,m,a._deltaX,m+a.fontHeight);a.fillStyle.forEach(function(a){return e.addColorStop(a[0],a[1])});a.context.fillStyle=e}switch(a.baseline){case "top":var n=-a._rect0.top;break;case "middle":n=-a._rect0.top-Math.round(a._rect0.height/2);break;case "bottom":n=-a._rect0.top-a._rect0.height}a.fillStyle&&a.context.fillText(d,a._deltaX,m+n);a.strokeStyle&&a.context.strokeText(d,
a._deltaX,m+n);if(a.underline){d=a._getTextWidth(d);a.context.strokeStyle=b;a.context.lineWidth=a.strokeWidth||1;switch(a.baseline){case "top":n=a._rect0.height;break;case "middle":n=Math.round(a._rect0.height/2);break;case "bottom":n=0}a.context.beginPath();a.context.moveTo(a._deltaX,m+n+a.underlineOffset);a.context.lineTo(a._deltaX+d,m+n+a.underlineOffset);a.context.stroke()}return m+=a._rect0.fontHeight})}this.needAnimation=!1};p.prototype._getFontHeight=function(a){this._rect0={};var b=document.createElement("span");
b.appendChild(document.createTextNode("height"));b.style.cssText="font: "+a+"; white-space: nowrap; display: inline;";document.body.appendChild(b);var c=b.offsetHeight;document.body.removeChild(b);this._rect0.fontHeight=c;b=document.createElement("canvas");var d=this._getTextWidth("0");b.width=d;b.height=c;b=b.getContext("2d");b.textBaseline="top";b.font=a;b.fillStyle="#000";b.fillText("0",0,0);this.strokeStyle&&(b.strokeStyle="#000",b.lineWidth=this.strokeWidth,b.strokeText("0",0,0));a=-1;c+=1;var e=
!0;for(d=Math.round(d/2);e;)a++,e=b.getImageData(d,a,1,1),e=e.data,e=e.every(function(a){return 0===a});for(e=!0;e;)c--,e=b.getImageData(d,c,1,1),e=e.data,e=e.every(function(a){return 0===a});b=b=null;b=this.strokeStyle?this.strokeWidth||1:0;console.log(b);this._rect0.top=a-b;this._rect0.bottom=this._rect0.fontHeight-c+2*b;this._rect0.height=c-a+1;return this._rect0.height};p.prototype._getTextWidth=function(a){this.context.save();this.context.font=this.font;a=this.context.measureText(a).width;this.context.restore();
return a};p.prototype._getRealSizes=function(a){var b=this;var c=0;a=this.text.split("\n");a.forEach(function(a){a=b._getTextWidth(a);if(a>c)return c=a});return[c,a.length*this._rect0.height+(a.length-1)*(this._rect0.top+this._rect0.bottom)]};p.prototype.getOptions=function(){var a=d.prototype.getOptions.call(this);a.fontHeight=this.fontHeight;a.textWidth=this.textWidth;a.textHeight=this.textHeight;a.font=this.font;a.fillStyle=this.fillStyle;a.strokeStyle=this.strokeStyle;a.strokeWidth=this.strokeWidth;
a.underline=this.underline;a.underlineOffset=this.underlineOffset;a.text=this.text;return a};var r=function(a){var b=q.call(this,a)||this;b.type="tile";b.setRect(a.rect);return b};$jscomp.inherits(r,q);r.prototype.setRect=function(a){this.rect=a||[0,0,this.canvas.width,this.canvas.height];this.needAnimation=!0;return this.rect};r.prototype.animate=function(){if(this.loaded){if(this.visible)return this.context.beginPath(),this.context.fillStyle=this.context.createPattern(this.image,"repeat"),this.context.rect(this.rect[0],
this.rect[1],this.rect[2],this.rect[3]),this.context.fill(),this.needAnimation=!1;this.needAnimation=!1}};var l=function(a){var b=h.call(this,a)||this;b.type="scene";b.setZIndex(a.zIndex);b.setMask(a.mask);b.needAnimation=!1;return b};$jscomp.inherits(l,h);l.prototype.add=function(a){if(null!=a.type){null==a.visible&&(a.visible=this.visible);null==a.shadow&&(a.shadow=this.shadow);a.canvas=this.canvas;a.context=this.context;switch(a.type){case "image":var b=new q(a);break;case "text":b=new p(a);break;
case "graph":b=new e(a);break;case "tile":b=new r(a)}this.childrens.push(b);return b}};l.prototype.clone=function(a){return this.add(a.getOptions())};l.prototype.clear=function(){this.childrens=[];return this.needAnimation=!0};l.prototype.setMask=function(a){this.mask=null!=a&&a?a:!1;this.needAnimation=!0;return this.mask};l.prototype.setZIndex=function(a){this.zIndex=this["int"](a);return this.canvas.style.zIndex=this.zIndex};l.prototype.hide=function(){h.prototype.hide.call(this);return this.context.clearRect(0,
0,this.size[0],this.size[1])};l.prototype.move=function(a,b){h.prototype.move.call(this,a,b);this.canvas.style.left=this.position[0]+"px";this.canvas.style.top=this.position[1]+"px";return this.position};l.prototype.shiftAll=function(a,b){b=void 0===b?0:b;return this.childrens.forEach(function(c){return c.shift(a,b)})};l.prototype.resize=function(a,b){h.prototype.resize.call(this,a,b);this.canvas.width=this.size[0];this.canvas.height=this.size[1];return this.size};l.prototype.setCenter=function(a,
b){h.prototype.setCenter.call(this,a,b);this.context.translate(this.center[0],this.center[1]);return this.center};l.prototype.setAnchor=function(a,b){h.prototype.setAnchor.call(this,a,b);this.context.translate(this.center[0],this.center[1]);return this.anchor};l.prototype.rotate=function(a){h.prototype.rotate.call(this,a);this.context.rotate(this._rotation);return this.rotation};l.prototype.setAlpha=function(a){h.prototype.setAlpha.call(this,a);return this.context.globalAlpha=this.alpha};l.prototype.animate=
function(){var a=this;if(this.visible)return this.context.clearRect(0,0,this.size[0],this.size[1]),this.mask&&(this.context.beginPath(),this.context.rect(this.mask[0],this.mask[1],this.mask[2],this.mask[3]),this.context.clip()),this.childrens.forEach(function(b){a.context.save();b.animate();return a.context.restore()}),this.needAnimation=!1;this.needAnimation=!1};var k=function(a){var b=h.call(this,a)||this;b._animate=b._animate.bind(b);if(!b.canvasSupport())return console.log("your browser not support canvas and/or context"),
!1;b.parent=a.parent||document.body;0===b.size[0]&&0===b.size[1]&&(b.size=[b["int"](b.parent.clientWidth),b["int"](b.parent.clientHeight)]);b._beforeAnimate=[];b._scene="default";b.add({type:"scene",name:"default"});b.start();return b};$jscomp.inherits(k,h);k.prototype.add=function(a){var b;null==a&&(a={});if("scene"===(a.type||"scene"))return this._createScene(a);(b=this.get(a.scene))||(b=this.getActive());b||(b=this.add({type:"scene",name:"default"}));return b.add(a)};k.prototype.remove=function(a){a=
this.index(a);if(-1===a)return!1;this.parent.removeChild(this.childrens[a].canvas);this.childrens.splice(a,1);return!0};k.prototype.onTop=function(a){var b=0;var c=!1;this.childrens.forEach(function(d){d.zIndex>b&&(b=d.zIndex);if(a===d.name)return c=d});c&&c.setZIndex(b+1);return c};k.prototype.getActive=function(){var a;(a=this.get(this._scene))||(a=this.childrens[0]);a||(a=!1);return a};k.prototype.setActive=function(a){this._scene=a||"default";return this.getActive()};k.prototype.start=function(){return this._render=
requestAnimationFrame(this._animate)};k.prototype.stop=function(){return cancelAnimationFrame(this._render)};k.prototype.addEvent=function(a){return this._beforeAnimate.push(a)};k.prototype.removeEvent=function(a){var b=this;return this._beforeAnimate.forEach(function(c,d){if(c===a)return b._beforeAnimate.splice(d,1)})};k.prototype.fullscreen=function(a,b){null==a&&(a=!0);b||(b=this.parent);if(a)if(null!=b.requestFullScreen)b.requestFullScreen();else if(null!=b.webkitRequestFullScreen)b.webkitRequestFullScreen();
else if(null!=b.mozRequestFullScreen)b.mozRequestFullScreen();else return!1;else if(null!=document.cancelFullScreen)document.cancelFullScreen();else if(null!=document.webkitCancelFullScreen)document.webkitCancelFullScreen();else if(null!=document.mozCancelFullScreen)document.mozCancelFullScreen();else if(null!=document.exitFullScreen)document.exitFullScreen();else return!1;return!0};k.prototype.isFullscreen=function(){return null!=(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullscreenElement)};
k.prototype.canvasSupport=function(){return null!=document.createElement("canvas").getContext};k.prototype._createScene=function(a){null==a.visible&&(a.visible=this.visible);null==a.position&&(a.position=this.position);null==a.size&&(a.size=this.size);null==a.center&&(a.center=this.center);null==a.rotation&&(a.rotation=this.rotation);null==a.alpha&&(a.alpha=this.alpha);null==a.mask&&(a.mask=this.mask);null==a.shadow&&(a.shadow=this.shadow);a.parent=this.parent;a=new l(a);this.childrens.push(a);this.setActive(a.name);
return a};k.prototype._animate=function(){var a=this;g(this,k);this._beforeAnimate.forEach(function(b,c){return"function"===typeof b?b():a._beforeAnimate.splice(c,1)});this.needAnimation=!1;this.childrens.forEach(function(b){var c=b.needAnimation||b.childrens.some(function(a){return a.needAnimation});a.needAnimation=a.needAnimation||c;if(c)return b.animate()});return this._render=requestAnimationFrame(this._animate)};return k})}).call(this);